/**
 * @license MIT
 * @name create-videojs-player
 * @version 2.0.2
 * @author: Yoriiis aka Joris DANIEL <joris.daniel@gmail.com>
 * @description: Easy way to load and manage multiple Videojs players with API
 * {@link https://github.com/yoriiis/create-videojs-player}
 * @copyright 2019 Joris DANIEL
 **/

"use strict";function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var VideojsPlayer=function(){function e(n){_classCallCheck(this,e),this.options=Object.assign({multiplePlaying:!0},n||{}),this.players=[],this.playerOnPlaying=[]}return _createClass(e,[{key:"create",value:function(e){var n=this,t=Object.assign({element:null,playerVars:_defineProperty({nativeControlsForTouch:!1,preload:"auto",volumeControl:!1,controls:!0},"preload","auto"),events:{}},e||{}),a=(new Date).getTime(),r="videojs-".concat(a);t.element.VJS_ID=r,t.element.setAttribute("id",r),this.players.push(videojs(t.element,t.playerVars,function(){var e=videojs.getPlayers()[r];e.on("play",function(){n.playerOnPlaying.push(r),n.options.multiplePlaying||n.pauseOtherVideo(r)}),e.on("pause",n.updateArrayPlayersPlaying.bind(n,r)),e.on("ended",n.updateArrayPlayersPlaying.bind(n,r)),"function"==typeof t.events.onPlayerReady&&t.events.onPlayerReady(e)}))}},{key:"updateArrayPlayersPlaying",value:function(e){var n=this;this.playerOnPlaying.forEach(function(t,a){t===e&&n.playerOnPlaying.splice(a,1)})}},{key:"pauseOtherVideo",value:function(e){this.playerOnPlaying.length&&this.playerOnPlaying.forEach(function(n){n!==e&&videojs.getPlayers()[n].pause()})}}]),e}(),_default=VideojsPlayer;exports.default=_default,module.exports=exports.default;